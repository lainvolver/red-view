# ランキング推移機能追加 タスクリスト

# ランキング推移機能追加 タスクリスト

- [x] `index.astro` にChart.js用CDNを追加
- [x] UIの調整
  - [x] `modeSelect`（ランキング種別）に「ランキング推移」の選択肢を追加
  - [x] テーブル表示とグラフ表示（`<canvas>`）を切り替えられるように、コンテナの追加とスタイル調整
- [x] ランキング推移データの算出ロジック実装
  - [x] 最新話から1話ずつ遡るループ処理 (`offset`) の実装
  - [x] 各 `offset` における有効な作品数（エピソードが存在する作品）をカウント
  - [x] 有効な作品数が全作品数の半分以下になったら遡及を停止するロジックの実装
  - [x] 各 `offset` におけるコメント数の順位計算処理
- [x] グラフ（Chart.js）の描画ロジック実装
  - [x] データセットの生成（X軸: 古い話数から最新話へ、Y軸: 順位）
  - [x] アニメごとにグラフの色を変える実装
  - [x] Chartインスタンスの初期化・更新・破棄の管理
- [x] 手動検証
  - [x] モード切替時に正しくグラフが表示されるか確認
  - [x] リロード・シーズン変更時にエラーなく表示・破棄されるか確認
